
---
title: 其他
date: 2024/07/26
tags:
 - 网络
categories:
 - 网络
---

## 从输入URL到页面展示这中间发生了什么

1. 浏览器进程通过进程间通信（IPC）把URL请求发送给网络进程。
2. 网络进程接收到URL请求后检查本地缓存是否缓存了该请求资源，如果有则将该资源返回给浏览器进程。
3. 如果没有，网络进程向web服务器发起http请求（网络请求），请求流程如下：
   *进行DNS解析，获取服务器IP地址，端口（非dns解析，根据协议指定）。
   *利用IP地址和服务器建立TCP连接。
   *构建请求头信息。
   *发送请求头信息。
   *服务器响应后，网络进程接收响应头和响应信息，并解析响应内容。
4. 网络进程解析响应流程：
   *检查状态码，如果是301（永久重定向）/302（临时重定向），则需要重定向，从Location字段中读取地址，重新进行第4步，如果是200，则继续处理请求。
   *200响应处理：检查响应类型 Content-Type，如果是字节流类型，则将请求提交给下载管理器，该导航流程结束，不再进行后续的渲染，如果是html则通知浏览器进程准备渲染进程准备进行渲染。
5. 准备渲染进程：
浏览器进程检查当前URL是否和之前打开的渲染进程根域名是否相同，如果相同，则复用原来的进程，如果不同，则开启新的渲染进程。
6. 传输数据、更新状态：
   *渲染进程准备好后，浏览器向渲染进程发起“提交文档”的消息，渲染进程接收到消息和网络进程建立传输数据的“管道”。
   *渲染进程接收完数据后，向浏览器发送“确认提交”消息。
   *浏览器进程接收到确认消息后更新浏览器界面状态：安全、地址栏URL、前进后退的历史状态、更新web页面。
    - PARSE：解析 HTML，构建 DOM 树。
    - STYLE：为每个节点计算最终的有效样式。
    - LAYOUT：为每个节点计算位置和大小等布局信息。
    - PAINT：绘制不同的盒子，为了避免不必要的重绘，将会分成多个层进行处理。
    - COMPOSITE & RENDER：将上述不同的层合成为一张位图，发送给 GPU，渲染到屏幕上

## 重定向

### 301（永久重定向）

定义
301状态码表示请求的资源已被永久移动到新的 URL。客户端（如浏览器）在接收到301响应后，应使用新的 URL 进行后续的请求。

使用场景
网站迁移：当整个网站从一个域名迁移到另一个域名时。
页面重构：当某个页面的 URL 发生永久变化时。
SEO 优化：301 重定向有助于将旧 URL 的权重传递到新 URL，从而保持搜索引擎排名。

### 302（临时重定向）

定义
302状态码表示请求的资源临时移动到了新的URL。客户端应继续使用原始的URL进行后续请求。

使用场景
临时维护：当某个页面临时不可用，需要将用户重定向到另一个页面。
A/B 测试：在进行 A/B 测试时，可以临时重定向用户到不同的页面。

### 区别

重定向的性质：
301：永久重定向，表示资源已永久移动到新的 URL。
302：临时重定向，表示资源暂时移动到新的 URL。

浏览器行为：
301：浏览器会缓存重定向，后续请求直接使用新的URL。
302：浏览器不会缓存重定向，后续请求仍使用原始URL。

SEO 影响：
301：有助于将旧URL的权重传递到新URL，有利于SEO。
302：不会将旧URL的权重传递到新URL，对 SEO没有帮助。