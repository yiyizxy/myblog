---
title: 其他
date: 2024/07/26
tags:
 - 网络
categories:
 - 网络
---

## 从输入URL到页面展示这中间发生了什么

1. 浏览器进程通过进程间通信（IPC）把URL请求发送给网络进程。
2. 【URL解析】网络进程接收到URL请求后会先判断输入的是否是合法url还是搜索词，如果是url，检查本地缓存是否缓存了该请求资源，如果有则将该资源返回给浏览器进程。
3. 如果没有，网络进程向web服务器发起http请求（网络请求），请求流程如下：
   *【DNS解析】进行DNS解析，获取服务器IP地址，端口（非dns解析，根据协议指定）。
   *【TCP连接】利用IP地址和服务器建立TCP连接。
   *【HTTP请求】构建HTTP请求
4. 【响应请求】网络进程解析响应流程：
   *检查状态码，如果是301（永久重定向）/302（临时重定向），则需要重定向，从Location字段中读取地址，重新进行第4步，如果是200，则继续处理请求。
   *200响应处理：检查响应类型 Content-Type，如果是字节流类型，则将请求提交给下载管理器，该导航流程结束，不再进行后续的渲染，如果是html则通知浏览器进程准备渲染进程准备进行渲染。
5. 【页面渲染】
   *解析HTML，构建DOM树
   *解析CSS，生成CSS规则树
   *合并DOM树和CSS规则树，生成render树
   *布局render树（reflow），负责各元素尺寸、位置的计算
   *绘制render树(paint)，绘制页面的像素信息
   *浏览器会将各层的信息发送给GPU，GPU会将各层合成，显示在屏幕上

## 网络分层模型

### OSI的7层模型

![OSI](./assets/other/osi.png 'OSI')

应用层：定义了应用进程之间的交互规则，通过不同的应用层协议为不同的网络应用提供服务。例如DNS、HTTP、SMTP(简单邮件传输协议)等【可以理解为：规定数据的传输协议。】
表示层：表示层供多种功能用于应用层数据编码和转化,以确保以一个系统应用层发送的信息 可以被另一个系统应用层识别。【可以理解为：解决不同系统之间的通信，eg：Linux下的QQ和Windows下的QQ可以通信。】
会话层：建立、管理和终止表示层与实体之间的通信会话。【建立一个连接（自动的手机信息、自动的网络寻址）。】
传输层：向高层提供可靠的端到端的网络数据流服务。【可以理解为：每一个应用程序都会在网卡注册一个端口号，该层就是端口与端口的通信！常用的（TCP／IP）协议。】
网络层：网络层负责在源和终点之间建立连接。【可以理解为，此处需要确定计算机的位置，怎么确定？IPv4，IPv6！】
数据链路层：通过物理网络链路提供数据传输。不同的数据链路层定义了不同的网络和协议特征,其中包括物理编址、网络拓扑结构、错误校验、数据帧序列以及流。
【可以简单的理解为：规定了0和1的分包形式，确定了网络数据包的形式。】
物理层：物理层负责最后将信息编码成电流脉冲或其它信号（例如电缆、光纤、网卡、集线器等等）用于网上传输。【RJ45等将数据转化成0和1】

### TCP/IP网络分层模型

应用层【会话、表示、应用】：对应于OSI七层参考模型的应用层和表达层会话层。
传输层：提供两种端到端的通信服务。其中 TCP 协议提供可靠的数据流运输服务,UDP 协议提供不可靠的用户数据报服务。
网络层：本层包含IP协议、RIP 协议,负责数据的包装、寻址和路由。同时还包含网间控制报文协议用来提供网络诊断信息。【可以理解为：该层能确定计算机的位置】
网络接口层【物理、数据链路层】：网络接口层包括用于协作IP数据在已有网络介质上传输的协议。它定义像地址解析协议这样的协议，提供TCP/IP协议的数据结构和实际物理硬件之间的接口。
【可以理解为：确定网络数据包的形式】


## HTTP1.0与2.


1.HTTP是网络七层协议中哪一层的协议?
参考答案:应用层。
解题思路:基础知识
考察点:OSI七层协议的基础知识 分类:HTTP,基础知识,网络,{校招,社招都可以用} 难度分级:P4

2.UDP,TCP是网络七层协议中哪一层的协议,区别是什么,分别适用于什么场景?
参考答案:
传输层。 在TCP/IP模型中,传输层的功能是使源端主机和目标端主机上的对等实体可以进行会话。
在传输层定义了两种服务质量不同的协议。即:传输控制协议TCP(transmission control protocol)和用户数据报协议UDP(user datagram protocol)。
TCP协议是一个面向连接的、可靠的协议。它将一台主机发出的字节流无差错地发往互联网上的其他主机。 需要三次握手建立连接,才能进行数据传输。在发送端,它负责把上层传送下来的字节流分成报文段并传递给下层。 在接收端,它负责把收到的报文进行重组后递交给上层。TCP协议还要处理端到端的流量控制,以避免缓慢接收的接收方没有足够的缓冲区接收发 送方发送的大量数据。 UDP协议是一个不可靠的、无连接协议,不与对方建立连接,而是直接就把数据包发送过去。主要适用于不需要对报文进行排序和流量控制的 场合。 UDP适用于一次只传送少量数据、对可靠性要求不高的应用环境。比如,我们经常使用“ping”命令来测试两台主机之间TCP/IP通信是否正常, 其 实“ping”命令的原理就是向对方主机发送UDP数据包,然后对方主机确认收到数据包,如果数据包是否到达的消息及时反馈回来,那么网络就是 通的。
解题思路:基础知识,从面向连接、可靠性、应用场合上进行分析对比 考察点:七层协议中传输层的基础知识,着重从TCP vs UDP的区别上考察 分类:七层协议,基础知识,网络,{校招,社招都可以用} 难度分级:P4,P5

3.TCP对应的协议和UDP对应的协议
TCP对应的协议：
（1） FTP：定义了文件传输协议，使用21端口。常说某某计算机开了FTP服务便是启动了文件传输服务。下载文件，上传主页，都要用到FTP服务。
（2） Telnet：它是一种用于远程登陆的端口，用户可以以自己的身份远程连接到计算机上，通过这种端口可以提供一种基于DOS模式下的通信服务。如以前的BBS是-纯字符界面的，支持BBS的服务器将23端口打开，对外提供服务。
（3） SMTP：定义了简单邮件传送协议，现在很多邮件服务器都用的是这个协议，用于发送邮件。如常见的免费邮件服务中用的就是这个邮件服务端口，所以在电子邮件设置-中常看到有这么SMTP端口设置这个栏，服务器开放的是25号端口。
（4） POP3：它是和SMTP对应，POP3用于接收邮件。通常情况下，POP3协议所用的是110端口。也是说，只要你有相应的使用POP3协议的程序（例如Fo-xmail或Outlook），就可以不以Web方式登陆进邮箱界面，直接用邮件程序就可以收到邮件（如是163邮箱就没有必要先进入网易网站，再进入自己的邮-箱来收信）。
（5）HTTP协议：是从Web服务器传输超文本到本地浏览器的传送协议。
UDP对应的协议：
（1） DNS：用于域名解析服务，将域名地址转换为IP地址。DNS用的是53号端口。
（2） SNMP：简单网络管理协议，使用161号端口，是用来管理网络设备的。由于网络设备很多，无连接的服务就体现出其优势。
（3） TFTP(Trival File Transfer Protocal)，简单文件传输协议，该协议在熟知端口69上使用UDP服务。

4.TCP三次握手？能不能改成两次？
建立连接的过程是利用客户服务器模式，假设主机 A 为客户端，主机 B 为服务器端。
（ 1 ） TCP 的三次握手过程：主机 A 向 B 发送连接请求；主机 B 对收到的主机 A 的报文段进行确认；主机 A 再次对主机 B 的确认进行确认。
（ 2 ）采用三次握手是为了防止失效的连接请求报文段突然又传送到主机 B ，因而产生错误。失效的连接请求报文段是指：主机 A 发出的连接请求没有收到主机 B 的确认，于是经过一段时间后，主机 A 又重新向主机 B 发送连接请求，且建立成功，顺序完成数据传输。考虑这样一种特殊情况，主机 A 第一次发送的连接请求并没有丢失，而是因为网络节点导致延迟达到主机 B ，主机 B 以为是主机 A 又发起的新连接，于是主机 B 同意连接，并向主机 A 发回确认，但是此时主机 A 根本不会理会，主机 B 就一直在等待主机 A 发送数据，导致主机 B 的资源浪费。
（ 3 ）采用两次握手不行，原因就是上面说的实效的连接请求的特殊情况。

5.TCP的可靠性如何保证？
在TCP的连接中，数据流必须以正确的顺序送达对方。TCP的可靠性是通过顺序编号和确认（ACK）来实现的。TCP在开始传送一个段时，为准备重传而首先将该段插入到发送队列之中，同时启动时钟。其后，如果收到了接受端对该段的ACK信息，就将该段从队列中删去。如果在时钟规定的时间内，ACK未返回，那么就从发送队列中再次送出这个段。TCP在协议中就对数据可靠传输做了保障，握手与断开都需要通讯双方确认，数据传输也需要双方确认成功，在协议中还规定了：分包、重组、重传等规则；而UDP主要是面向不可靠连接的，不能保证数据正确到达目的地。

6.ping命令使用的是什么协议
 ICMP

7.ARP协议的工作原理
 首先，每台主机都会在自己的ARP缓冲区中建立一个 ARP列表，以表示IP地址和MAC地址的对应关系。当源主机需要将一个数据包要发送到目的主机时，会首先检查自己 ARP列表中是否存在该 IP地址对应的MAC地址，如果有，就直接将数据包发送到这个MAC地址；如果没有，就向本地网段发起一个ARP请求的广播包，查询此目的主机对应的MAC地址。此ARP请求数据包里包括源主机的IP地址、硬件地址、以及目的主机的IP地址。网络中所有的主机收到这个ARP请求后，会检查数据包中的目的IP是否和自己的IP地址一致。如果不相同就忽略此数据包；如果相同，该主机首先将发送端的MAC地址和IP地址添加到自己的ARP列表中，如果ARP表中已经存在该IP的信息，则将其覆盖，然后给源主机发送一个 ARP响应数据包，告诉对方自己是它需要查找的MAC地址；源主机收到这个ARP响应数据包后，将得到的目的主机的IP地址和MAC地址添加到自己的ARP列表中，并利用此信息开始数据的传输。如果源主机一直没有收到ARP响应数据包，表示ARP查询失败。

8.在浏览器中输入网址后执行的全部过程
1).查找域名对应的IP地址。这一步会依次查找浏览器缓存，系统缓存，路由器缓存，ISPNDS缓存，根域名服务器。
2).向IP对应的服务器发送请求。
3).服务器响应请求，发回网页内容。
4).浏览器解析网页内容。
由于网页可能有重定向，或者嵌入了图片，AJAX，其它子网页等等，这4个步骤可能反复进行多次才能将最终页面展示给用户。

9.cookie 和session 的区别
cookie数据存放在客户的浏览器上，session数据放在服务器上。
cookie不是很安全，别人可以分析存放在本地的COOKIE并进行COOKIE欺骗考虑到安全应当使用session。
session会在一定时间内保存在服务器上。当访问增多，会比较占用你服务器的性能
考虑到减轻服务器性能方面，应当使用COOKIE。
单个cookie保存的数据不能超过4K，很多浏览器都限制一个站点最多保存20个cookie。
个人建议：
将登陆信息等重要信息存放为SESSION
其他信息如果需要保留，可以放在COOKIE中