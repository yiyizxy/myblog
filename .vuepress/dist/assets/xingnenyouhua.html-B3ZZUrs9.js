import{_ as e,o as n,c as a,e as t}from"./app-COjMlnxi.js";const d="/myblog/assets/peformance-DkMeOEWE.png",r={},i=t('<p><img src="'+d+'" alt="性能指标" title="性能指标"></p><h2 id="performance-timing对象属性属性含义" tabindex="-1"><a class="header-anchor" href="#performance-timing对象属性属性含义"><span>performance.timing对象属性属性含义</span></a></h2><h3 id="navigationstart" tabindex="-1"><a class="header-anchor" href="#navigationstart"><span>navigationStart</span></a></h3><p>当前浏览器窗口的前一个网页关闭，发生unload事件时的Unix毫秒时间戳。如果没有前一个网页，则等于fetchStart属性。</p><h3 id="unloadeventstart" tabindex="-1"><a class="header-anchor" href="#unloadeventstart"><span>unloadEventStart</span></a></h3><p>前一页面卸载开始，如果前一个网页与当前网页属于同一个域名，则返回前一个网页的unload事件发生时的Unix毫秒时间戳。如果没有前一个网页，或者之前的网页跳转不是在同一个域名内，则返回值为0。</p><h3 id="unloadeventend" tabindex="-1"><a class="header-anchor" href="#unloadeventend"><span>unloadEventEnd</span></a></h3><p>前一页面卸载结束，如果前一个网页与当前网页属于同一个域名，则返回前一个网页unload事件的回调函数结束时的Unix毫秒时间戳。如果没有前一个网页，或者之前的网页跳转不是在同一个域名内，则返回值为0。</p><h3 id="redirectstart" tabindex="-1"><a class="header-anchor" href="#redirectstart"><span>redirectStart</span></a></h3><p>重定向开始，返回第一个HTTP跳转开始时的Unix毫秒时间戳。如果没有跳转，或者不是同一个域名内部的跳转，则返回值为0。</p><h3 id="redirectend" tabindex="-1"><a class="header-anchor" href="#redirectend"><span>redirectEnd</span></a></h3><p>重定向结束，返回最后一个HTTP跳转结束时（即跳转回应的最后一个字节接受完成时）的Unix毫秒时间戳。如果没有跳转，或者不是同一个域名内部的跳转，则返回值为0。</p><h3 id="fetchstart" tabindex="-1"><a class="header-anchor" href="#fetchstart"><span>fetchStart</span></a></h3><p>页面开始加载，返回浏览器准备使用HTTP请求读取文档时的Unix毫秒时间戳。该事件在网页查询本地缓存之前发生。</p><h3 id="domainlookupstart" tabindex="-1"><a class="header-anchor" href="#domainlookupstart"><span>domainLookupStart</span></a></h3><p>DNS查询开始，返回域名查询开始时的Unix毫秒时间戳。如果使用持久连接，或者信息是从本地缓存获取的，则返回值等同于fetchStart属性的值。</p><h3 id="domainlookupend" tabindex="-1"><a class="header-anchor" href="#domainlookupend"><span>domainLookupEnd</span></a></h3><p>DNS查询结束，返回域名查询结束时的Unix毫秒时间戳。如果使用持久连接，或者信息是从本地缓存获取的，则返回值等同于fetchStart属性的值。</p><h3 id="connectstart" tabindex="-1"><a class="header-anchor" href="#connectstart"><span>connectStart</span></a></h3><p>SSL连接开始，返回HTTP请求开始向服务器发送时的Unix毫秒时间戳。如果使用持久连接（persistent connection），则返回值等同于fetchStart属性的值。</p><h3 id="secureconnectionstart" tabindex="-1"><a class="header-anchor" href="#secureconnectionstart"><span>secureConnectionStart</span></a></h3><p>返回浏览器与服务器开始安全链接的握手时的Unix毫秒时间戳。如果当前网页不要求安全连接，则返回0。</p><h3 id="connectend" tabindex="-1"><a class="header-anchor" href="#connectend"><span>connectEnd</span></a></h3><p>SSL连接结束，返回浏览器与服务器之间的连接建立时的Unix毫秒时间戳。如果建立的是持久连接，则返回值等同于fetchStart属性的值。连接建立指的是所有握手和认证过程全部结束。</p><h3 id="requeststart" tabindex="-1"><a class="header-anchor" href="#requeststart"><span>requestStart</span></a></h3><p>开始请求页面文档，返回浏览器向服务器发出HTTP请求时（或开始读取本地缓存时）的Unix毫秒时间戳。</p><h3 id="responsestart" tabindex="-1"><a class="header-anchor" href="#responsestart"><span>responseStart</span></a></h3><p>首字节时间，返回浏览器从服务器收到（或从本地缓存读取）第一个字节时的Unix毫秒时间戳。</p><h3 id="responseend" tabindex="-1"><a class="header-anchor" href="#responseend"><span>responseEnd</span></a></h3><p>结束请求页面文档，返回浏览器从服务器收到（或从本地缓存读取）最后一个字节时（如果在此之前HTTP连接已经关闭，则返回关闭时）的Unix毫秒时间戳。</p><h3 id="domloading" tabindex="-1"><a class="header-anchor" href="#domloading"><span>domLoading</span></a></h3><p>DOM 开始加载，返回当前网页DOM结构开始解析时（即Document.readyState属性变为loading、相应的readystatechange事件触发时）的Unix毫秒时间戳。</p><h3 id="dominteractive" tabindex="-1"><a class="header-anchor" href="#dominteractive"><span>domInteractive</span></a></h3><p>DOM 解析结束，返回当前网页DOM结构结束解析、开始加载内嵌资源时（即Document.readyState属性变为interactive、相应的readystatechange事件触发时）的Unix毫秒时间戳。</p><h3 id="domcontentloadedeventstart" tabindex="-1"><a class="header-anchor" href="#domcontentloadedeventstart"><span>domContentLoadedEventStart</span></a></h3><p>开始加载远程资源，返回当前网页DOMContentLoaded事件发生时（即DOM结构解析完毕、所有脚本开始运行时）的Unix毫秒时间戳。</p><h3 id="domcontentloadedeventend" tabindex="-1"><a class="header-anchor" href="#domcontentloadedeventend"><span>domContentLoadedEventEnd</span></a></h3><p>DOM Ready时间，返回当前网页所有需要执行的脚本执行完成时的Unix毫秒时间戳。</p><h3 id="domcomplete" tabindex="-1"><a class="header-anchor" href="#domcomplete"><span>domComplete</span></a></h3><p>资源全部准备就绪（含异步），返回当前网页DOM结构生成时（即Document.readyState属性变为complete，以及相应的readystatechange事件发生时）的Unix毫秒时间戳。</p><h3 id="loadeventstart" tabindex="-1"><a class="header-anchor" href="#loadeventstart"><span>loadEventStart</span></a></h3><p>页面完全加载时间，返回当前网页load事件的回调函数开始时的Unix毫秒时间戳。如果该事件还没有发生，返回0。</p><h3 id="loadeventend" tabindex="-1"><a class="header-anchor" href="#loadeventend"><span>loadEventEnd</span></a></h3><p>onload回调函数结束，返回当前网页load事件的回调函数运行结束时的Unix毫秒时间戳。如果该事件还没有发生，返回0。</p><h2 id="测速阶段统计方式" tabindex="-1"><a class="header-anchor" href="#测速阶段统计方式"><span>测速阶段统计方式</span></a></h2><p>参考：https://km.sankuai.com/page/145683988</p><h2 id="网页加载的核心指标" tabindex="-1"><a class="header-anchor" href="#网页加载的核心指标"><span>网页加载的核心指标</span></a></h2><h3 id="首字节时间-responsestarttime" tabindex="-1"><a class="header-anchor" href="#首字节时间-responsestarttime"><span>首字节时间-responseStartTime</span></a></h3><p>指浏览器接收到 HTML 文档第一个字节的时间。此时间点之前，浏览器需要经过 DNS解析、重定向(若有)、建立 TCP/SSL 连接、服务器响应等过程。 反映的问题：服务器、CDN 性能 对应测速点：responseStart</p><h3 id="dom构建完成时间-可交互时间-dominteractivetime" tabindex="-1"><a class="header-anchor" href="#dom构建完成时间-可交互时间-dominteractivetime"><span>DOM构建完成时间/可交互时间-domInteractiveTime</span></a></h3><p>HTML 解析器完成 DOM 树构建的时间。此时间点之前，浏览器需要经过同步静态资源加载、内联 JavaScript 脚本运行、HTML 解析器生成 DOM 树的过程。此时网页变成可交互状态，到此为止便是网页的可交互时间。用户可以进行正常的事件输入交互操作。 反映问题：前端代码执行性能，加载策略 对应测速点：domInteractive</p><h3 id="dom-ready时间" tabindex="-1"><a class="header-anchor" href="#dom-ready时间"><span>DOM Ready时间</span></a></h3><p>CSS树和DOM树合并渲染树后，并执行完成同步 JavaScript 脚本的时间。此时间点之前，包含了DOM树构建的过程、CSS树构建的过程、以及同步 JavaScript 脚本执行的时间。 反映问题：css资源阻塞 对应测速点：domContentLoadedEventEnd</p><h3 id="首屏时间" tabindex="-1"><a class="header-anchor" href="#首屏时间"><span>首屏时间</span></a></h3><p>首屏时间是指浏览器从响应用户输入网络地址，到首屏内容渲染完成的时间。 但是基于加载指标类的数据采集，不足以验证页面的真实性能，结合感官可使用的首屏的时间，来作为首屏时间。 详细内容可见首屏时间定义及计算方式。</p><h3 id="完全加载时间" tabindex="-1"><a class="header-anchor" href="#完全加载时间"><span>完全加载时间</span></a></h3><p>DOM Tree 构建完成后，开始加载网页资源，资源完全加载完成的时间。此时会触发浏览器 onload 事件。 反映的问题：资源加载问题、前端代码性能 计算方式：loadEventStart</p><h2 id="优化思路" tabindex="-1"><a class="header-anchor" href="#优化思路"><span>优化思路</span></a></h2><p>分析思路，慢的原因是什么？</p><ul><li>服务器响应慢</li><li>阻断渲染的js/css</li><li>资源加载时间长</li><li>客户端渲染机器影响</li></ul><p>优化方案</p><ul><li>服务器优化：缓存html页面、页面资源，减少浏览器直接请求资源 =&gt; 缓存机制（面试）</li><li>图片优化：采用不同图片格式等，减少图片体积，提高图片加载速度</li><li>代码优化：重构、压缩、注释过滤</li><li>使用cdn</li><li>渲染阻断优化：</li></ul><h2 id="性能分析工具" tabindex="-1"><a class="header-anchor" href="#性能分析工具"><span>性能分析工具</span></a></h2><p>1、前端监控：owl、raptor等 2、常见工具：Chrome Performance、https://km.sankuai.com/page/120790337?searchid=951976494、WebPageTest、PageSpeed</p><p>文档加载过程 文档渲染呈现过程 交互过 文档加载过程： DCL：空白到出现内容所花费的时间 渲染呈现过程： FP&amp;FCP：首次绘制（FP，可能是背景色或loading），首次内容绘制时间（FCP） FMP：首要内容出现在屏幕上的时间 LCP：视窗内最大的元素绘制的时 交互过程： TTI：网页首次完全达到可交互状态的时间点 FPS：每秒可以重新绘制的帧数，用于衡量应用流畅度</p>',65),l=[i];function s(o,c){return n(),a("div",null,l)}const p=e(r,[["render",s],["__file","xingnenyouhua.html.vue"]]),m=JSON.parse('{"path":"/blogs/technology/network/xingnenyouhua.html","title":"性能优化","lang":"en-US","frontmatter":{"title":"性能优化","date":"2024/07/20","tags":["网络"],"categories":["网络"]},"headers":[{"level":2,"title":"performance.timing对象属性属性含义","slug":"performance-timing对象属性属性含义","link":"#performance-timing对象属性属性含义","children":[{"level":3,"title":"navigationStart","slug":"navigationstart","link":"#navigationstart","children":[]},{"level":3,"title":"unloadEventStart","slug":"unloadeventstart","link":"#unloadeventstart","children":[]},{"level":3,"title":"unloadEventEnd","slug":"unloadeventend","link":"#unloadeventend","children":[]},{"level":3,"title":"redirectStart","slug":"redirectstart","link":"#redirectstart","children":[]},{"level":3,"title":"redirectEnd","slug":"redirectend","link":"#redirectend","children":[]},{"level":3,"title":"fetchStart","slug":"fetchstart","link":"#fetchstart","children":[]},{"level":3,"title":"domainLookupStart","slug":"domainlookupstart","link":"#domainlookupstart","children":[]},{"level":3,"title":"domainLookupEnd","slug":"domainlookupend","link":"#domainlookupend","children":[]},{"level":3,"title":"connectStart","slug":"connectstart","link":"#connectstart","children":[]},{"level":3,"title":"secureConnectionStart","slug":"secureconnectionstart","link":"#secureconnectionstart","children":[]},{"level":3,"title":"connectEnd","slug":"connectend","link":"#connectend","children":[]},{"level":3,"title":"requestStart","slug":"requeststart","link":"#requeststart","children":[]},{"level":3,"title":"responseStart","slug":"responsestart","link":"#responsestart","children":[]},{"level":3,"title":"responseEnd","slug":"responseend","link":"#responseend","children":[]},{"level":3,"title":"domLoading","slug":"domloading","link":"#domloading","children":[]},{"level":3,"title":"domInteractive","slug":"dominteractive","link":"#dominteractive","children":[]},{"level":3,"title":"domContentLoadedEventStart","slug":"domcontentloadedeventstart","link":"#domcontentloadedeventstart","children":[]},{"level":3,"title":"domContentLoadedEventEnd","slug":"domcontentloadedeventend","link":"#domcontentloadedeventend","children":[]},{"level":3,"title":"domComplete","slug":"domcomplete","link":"#domcomplete","children":[]},{"level":3,"title":"loadEventStart","slug":"loadeventstart","link":"#loadeventstart","children":[]},{"level":3,"title":"loadEventEnd","slug":"loadeventend","link":"#loadeventend","children":[]}]},{"level":2,"title":"测速阶段统计方式","slug":"测速阶段统计方式","link":"#测速阶段统计方式","children":[]},{"level":2,"title":"网页加载的核心指标","slug":"网页加载的核心指标","link":"#网页加载的核心指标","children":[{"level":3,"title":"首字节时间-responseStartTime","slug":"首字节时间-responsestarttime","link":"#首字节时间-responsestarttime","children":[]},{"level":3,"title":"DOM构建完成时间/可交互时间-domInteractiveTime","slug":"dom构建完成时间-可交互时间-dominteractivetime","link":"#dom构建完成时间-可交互时间-dominteractivetime","children":[]},{"level":3,"title":"DOM Ready时间","slug":"dom-ready时间","link":"#dom-ready时间","children":[]},{"level":3,"title":"首屏时间","slug":"首屏时间","link":"#首屏时间","children":[]},{"level":3,"title":"完全加载时间","slug":"完全加载时间","link":"#完全加载时间","children":[]}]},{"level":2,"title":"优化思路","slug":"优化思路","link":"#优化思路","children":[]},{"level":2,"title":"性能分析工具","slug":"性能分析工具","link":"#性能分析工具","children":[]}],"git":{"createdTime":1721750511000,"updatedTime":1721991355000,"contributors":[{"name":"zhuxiaoying","email":"zhuxiaoying@meituan.com","commits":2}]},"filePathRelative":"blogs/technology/network/性能优化.md"}');export{p as comp,m as data};
